
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Converting the radar data to Cartesian coordinates with Py-ART &#8212; PyDDA 1.4.0 documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributor’s Guide" href="../contributors_guide/index.html" />
    <link rel="prev" title="Radar Data Quality Control - Dealiasing" href="dealiasing_velocities.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">PyDDA</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  User Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../contributors_guide/index.html">
  Contributor’s Guide
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../source/auto_examples/index.html">
  PyDDA Example Gallery
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../dev_reference/index.html">
  Developer Reference Manual
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="read_radar_data.html">
   Reading in Radar Data in Native Radial Coordinates
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="dealiasing_velocities.html">
   Radar Data Quality Control - Dealiasing
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Converting the radar data to Cartesian coordinates with Py-ART
  </a>
 </li>
</ul>

  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#gridding-the-data">
   Gridding the data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="converting-the-radar-data-to-cartesian-coordinates-with-py-art">
<span id="gridding"></span><h1>Converting the radar data to Cartesian coordinates with Py-ART<a class="headerlink" href="#converting-the-radar-data-to-cartesian-coordinates-with-py-art" title="Permalink to this headline">#</a></h1>
<p>PyDDA expects radar data to be in Cartesian coordinates before it retrieves
the wind fields. Most radar data, however, is in the radar’s native antenna
coordinates. Therefore, the radar data needs to be converted to Cartesian
coordinates. Py-ART’s mapping toolbox contains the necessary utilties</p>
<p>We will assume that you have followed the steps outlined in <a class="reference internal" href="read_radar_data.html#reading-radar-data"><span class="std std-ref">Reading in Radar Data in Native Radial Coordinates</span></a>
for reading the radar data in its native coordinates.  PyDDA requires dealiased velocities
with noise, ground clutter, and second trip echoes removed for proper
wind retrieval. Therefore, make sure you have first followed the instructions in <a class="reference internal" href="dealiasing_velocities.html#dealiasing-velocities"><span class="std std-ref">Radar Data Quality Control - Dealiasing</span></a>
to correct the Doppler velocity data.</p>
<section id="gridding-the-data">
<h2>Gridding the data<a class="headerlink" href="#gridding-the-data" title="Permalink to this headline">#</a></h2>
<p>After the Doppler velocity data is corrected, it needs to be projected
from the radar’s native antenna coordinates to Cartesian coordinates.</p>
<p>First, we need to determine a grid spacing that we want to use for the coordinate
system. The X-band radars have a maximum unambiguous range of 50 km, so we do
want to expand our grid to include areas 50 km away fron one of the radars</p>
<p>In addition, we want to be careful with our choice of grid resolution. For example,
if we choose too fine of a grid resolution, then there may not be enough radar coverage
available for making the input radial velocity fields continuous. This can cause your
retrieval to have artificial noise, especially in updraft velocity. Therefore,
you will need to choose a grid spacing that is coarse enough to have a continuous
input radial velocity field at all altitudes. For example, Kosiba et al. (2013)
chose their grid spacing such that it is about 1/2.5 the data spacing at the feature
of interest. In this example, we will elect for a 500 m grid spacing.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid_limits</span> <span class="o">=</span> <span class="p">((</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">15000.</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">50000.</span><span class="p">,</span> <span class="mf">50000.</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">50000.</span><span class="p">,</span> <span class="mf">50000.</span><span class="p">))</span>
<span class="n">grid_shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="mi">201</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">grid_limits</span></code> is a 3-tuple of 2-tuples specifying the <span class="math notranslate nohighlight">\(z\)</span>, <span class="math notranslate nohighlight">\(y\)</span>, and <span class="math notranslate nohighlight">\(x\)</span>
limits of the grid in meters. The <code class="code docutils literal notranslate"><span class="pre">grid_shape</span></code> specifies the shape of the grid in number of
points. We then use PyART’s <a class="reference external" href="https://arm-doe.github.io/pyart/API/generated/pyart.map.grid_from_radars.html">grid_from_radars</a>
function to create the grids <code class="code docutils literal notranslate"><span class="pre">grid_sw</span></code> and <code class="code docutils literal notranslate"><span class="pre">grid_se</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grid_sw</span> <span class="o">=</span> <span class="n">pyart</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">grid_from_radars</span><span class="p">([</span><span class="n">radar_sw</span><span class="p">],</span> <span class="n">grid_limits</span><span class="o">=</span><span class="n">grid_limits</span><span class="p">,</span>
                                 <span class="n">grid_shape</span><span class="o">=</span><span class="n">grid_shape</span><span class="p">,</span> <span class="n">gatefilter</span><span class="o">=</span><span class="n">gatefilter_sw</span><span class="p">)</span>
<span class="n">grid_se</span> <span class="o">=</span> <span class="n">pyart</span><span class="o">.</span><span class="n">map</span><span class="o">.</span><span class="n">grid_from_radars</span><span class="p">([</span><span class="n">radar_se</span><span class="p">],</span> <span class="n">grid_limits</span><span class="o">=</span><span class="n">grid_limits</span><span class="p">,</span>
                                 <span class="n">grid_shape</span><span class="o">=</span><span class="n">grid_shape</span><span class="p">,</span> <span class="n">gatefilter</span><span class="o">=</span><span class="n">gatefilter_se</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, we should visualize the output grids using Py-ART’s
<a class="reference external" href="https://arm-doe.github.io/pyart/API/generated/pyart.graph.GridMapDisplay.html">GridMapDisplay</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">display1</span> <span class="o">=</span> <span class="n">pyart</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">GridMapDisplay</span><span class="p">(</span><span class="n">grid_sw</span><span class="p">)</span>
<span class="n">display1</span><span class="o">.</span><span class="n">plot_latitude_slice</span><span class="p">(</span><span class="s1">&#39;corrected_velocity&#39;</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">36.5</span><span class="p">,</span>
                             <span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">30</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span>
<span class="n">display2</span> <span class="o">=</span> <span class="n">pyart</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">GridMapDisplay</span><span class="p">(</span><span class="n">grid_se</span><span class="p">)</span>
<span class="n">display2</span><span class="o">.</span><span class="n">plot_latitude_slice</span><span class="p">(</span><span class="s1">&#39;corrected_velocity&#39;</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">36.5</span><span class="p">,</span>
                             <span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">,</span> <span class="n">fig</span><span class="o">=</span><span class="n">fig</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">30</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference download internal" download="" href="../_downloads/f6e1012d6c9836f17d58743ddfb2745f/gridding-1.py"><code class="xref download docutils literal notranslate"><span class="pre">Source</span> <span class="pre">code</span></code></a>, <a class="reference download internal" download="" href="../_downloads/5f0389b772faa41d38bab2225a67df9e/gridding-1.png"><code class="xref download docutils literal notranslate"><span class="pre">png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/6d74f9d65389bd9ef74327488e6c62d9/gridding-1.hires.png"><code class="xref download docutils literal notranslate"><span class="pre">hires.png</span></code></a>, <a class="reference download internal" download="" href="../_downloads/ab3f1d02845a1733d70fa1920be9f038/gridding-1.pdf"><code class="xref download docutils literal notranslate"><span class="pre">pdf</span></code></a>)</p>
<figure class="align-default">
<img alt="../_images/gridding-1.png" class="plot-directive" src="../_images/gridding-1.png" />
</figure>
<p>Note that, as the spacing between the sweeps increases with
altitude that there can be gridding artifacts that can produce spurious air motion in the
retrievals (Collis et al. 2010). To reduce these artifacts it’s important that the velocity
field at higher altitudes be as continuous as possible. This requires a grid resolution that
will you will need to balance with keeping important details of the feature of interest that
you are trying to grid. You may have to adjust your grid resolution to balance these two
concerns in order to properly retrieve wind velocities. With the current grid spacing,
it is apparent that there are discontinuities in the radial velocity field above 7.5 km
altitude that could cause spurious noise in the retrieved vertical velocity field.
Vertical velocities are likely to be most reliable about 20-40 km from either radar.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">#</a></h2>
<p>Collis, S., A. Protat, and K. Chung, 2010: The Effect of Radial Velocity Gridding Artifacts on
Variationally Retrieved Vertical Velocities. J. Atmos. Oceanic Technol., 27, 1239–1246,
<a class="reference external" href="https://doi.org/10.1175/2010JTECHA1402.1">https://doi.org/10.1175/2010JTECHA1402.1</a>.</p>
<p>Koch, S. E., M. desJardins, and P. J. Kocin, 1983: An Interactive Barnes Objective Map Analysis
Scheme for Use with Satellite and Conventional Data. J. Appl. Meteor. Climatol., 22, 1487–1503,
<a class="reference external" href="https://doi.org/10.1175/1520-0450(1983">https://doi.org/10.1175/1520-0450(1983</a>)022&lt;1487:AIBOMA&gt;2.0.CO;2.</p>
<p>Kosiba, K., J. Wurman, Y. Richardson, P. Markowski, P. Robinson, and J. Marquis, 2013:
Genesis of the Goshen County, Wyoming, Tornado on 5 June 2009 during VORTEX2.
Mon. Wea. Rev., 141, 1157–1181, <a class="reference external" href="https://doi.org/10.1175/MWR-D-12-00056.1">https://doi.org/10.1175/MWR-D-12-00056.1</a>.</p>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="dealiasing_velocities.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Radar Data Quality Control - Dealiasing</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../contributors_guide/index.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Contributor’s Guide</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
<footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2023, PyDDA Developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.5.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>