
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pydda.retrieval.get_dd_wind_field &#8212; PyDDA 0.3.0 documentation</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pydda.retrieval.get_dd_wind_field_nested" href="pydda.retrieval.get_dd_wind_field_nested.html" />
    <link rel="prev" title="pydda.cost_functions.calculate_fall_speed" href="pydda.cost_functions.calculate_fall_speed.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pydda.retrieval.get_dd_wind_field_nested.html" title="pydda.retrieval.get_dd_wind_field_nested"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="pydda.cost_functions.calculate_fall_speed.html" title="pydda.cost_functions.calculate_fall_speed"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">PyDDA 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Developer Reference Manual</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="pydda-retrieval-get-dd-wind-field">
<h1>pydda.retrieval.get_dd_wind_field<a class="headerlink" href="#pydda-retrieval-get-dd-wind-field" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="pydda.retrieval.get_dd_wind_field">
<code class="descclassname">pydda.retrieval.</code><code class="descname">get_dd_wind_field</code><span class="sig-paren">(</span><em>Grids</em>, <em>u_init</em>, <em>v_init</em>, <em>w_init</em>, <em>vel_name=None</em>, <em>refl_field=None</em>, <em>u_back=None</em>, <em>v_back=None</em>, <em>z_back=None</em>, <em>frz=4500.0</em>, <em>Co=1.0</em>, <em>Cm=1500.0</em>, <em>Cx=0.0</em>, <em>Cy=0.0</em>, <em>Cz=0.0</em>, <em>Cb=0.0</em>, <em>Cv=0.0</em>, <em>Cmod=0.0</em>, <em>Ut=None</em>, <em>Vt=None</em>, <em>filt_iterations=2</em>, <em>mask_outside_opt=False</em>, <em>weights_obs=None</em>, <em>weights_model=None</em>, <em>weights_bg=None</em>, <em>max_iterations=200</em>, <em>mask_w_outside_opt=True</em>, <em>filter_window=9</em>, <em>filter_order=4</em>, <em>min_bca=30.0</em>, <em>max_bca=150.0</em>, <em>upper_bc=True</em>, <em>model_fields=None</em>, <em>output_cost_functions=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pydda/retrieval/wind_retrieve.html#get_dd_wind_field"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pydda.retrieval.get_dd_wind_field" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes in a list of Py-ART Grid objects and derives a
wind field. Every Py-ART Grid in Grids must have the same grid
specification.</p>
<p>In order for the model data constraint to be used,
the model data must be added as a field to at least one of the
grids in Grids. This involves interpolating the model data to the
Grids’ coordinates. There are helper functions for this for WRF
and HRRR data in <a class="reference internal" href="../index.html#module-pydda.constraints" title="pydda.constraints"><code class="xref py py-func docutils literal notranslate"><span class="pre">pydda.constraints()</span></code></a>:</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">make_constraint_from_wrf()</span></code></p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">add_hrrr_constraint_to_grid()</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>Grids: list of Py-ART Grids</strong></dt>
<dd><p class="first last">The list of Py-ART grids to take in corresponding to each radar.
All grids must have the same shape, x coordinates, y coordinates
and z coordinates.</p>
</dd>
<dt><strong>u_init: 3D ndarray</strong></dt>
<dd><p class="first last">The intial guess for the zonal wind field, input as a 3D array
with the same shape as the fields in Grids.</p>
</dd>
<dt><strong>v_init: 3D ndarray</strong></dt>
<dd><p class="first last">The intial guess for the meridional wind field, input as a 3D array
with the same shape as the fields in Grids.</p>
</dd>
<dt><strong>w_init: 3D ndarray</strong></dt>
<dd><p class="first last">The intial guess for the vertical wind field, input as a 3D array
with the same shape as the fields in Grids.</p>
</dd>
<dt><strong>vel_name: string</strong></dt>
<dd><p class="first last">Name of radial velocity field. Setting to None will have PyDDA attempt
to automatically detect the velocity field name.</p>
</dd>
<dt><strong>refl_field: string</strong></dt>
<dd><p class="first last">Name of reflectivity field. Setting to None will have PyDDA attempt 
to automatically detect the reflectivity field name.</p>
</dd>
<dt><strong>u_back: 1D array</strong></dt>
<dd><p class="first last">Background zonal wind field from a sounding as a function of height.
This should be given in the sounding’s vertical coordinates.</p>
</dd>
<dt><strong>v_back: 1D array</strong></dt>
<dd><p class="first last">Background meridional wind field from a sounding as a function of
height. This should be given in the sounding’s vertical coordinates.</p>
</dd>
<dt><strong>z_back: 1D array</strong></dt>
<dd><p class="first last">Heights corresponding to background wind field levels in meters. This
is given in the sounding’s original coordinates.</p>
</dd>
<dt><strong>frz: float</strong></dt>
<dd><p class="first last">Freezing level used for fall speed calculation in meters.</p>
</dd>
<dt><strong>Co: float</strong></dt>
<dd><p class="first last">Weight for cost function related to observed radial velocities.</p>
</dd>
<dt><strong>Cm: float</strong></dt>
<dd><p class="first last">Weight for cost function related to the mass continuity equation.</p>
</dd>
<dt><strong>Cx: float</strong></dt>
<dd><p class="first last">Weight for cost function related to smoothness in x direction</p>
</dd>
<dt><strong>Cy: float</strong></dt>
<dd><p class="first last">Weight for cost function related to smoothness in y direction</p>
</dd>
<dt><strong>Cz: float</strong></dt>
<dd><p class="first last">Weight for cost function related to smoothness in z direction</p>
</dd>
<dt><strong>Cv: float</strong></dt>
<dd><p class="first last">Weight for cost function related to vertical vorticity equation.</p>
</dd>
<dt><strong>Cmod: float</strong></dt>
<dd><p class="first last">Weight for cost function related to custom constraints.</p>
</dd>
<dt><strong>weights_obs: list of floating point arrays or None</strong></dt>
<dd><p class="first last">List of weights for each point in grid from each radar in Grids.
Set to None to let PyDDA determine this automatically.</p>
</dd>
<dt><strong>weights_model: list of floating point arrays or None</strong></dt>
<dd><p class="first last">List of weights for each point in grid from each custom field in
model_fields. Set to None to let PyDDA determine this automatically.</p>
</dd>
<dt><strong>weights_bg: list of floating point arrays or None</strong></dt>
<dd><p class="first last">List of weights for each point in grid from the sounding. Set to None
to let PyDDA determine this automatically.</p>
</dd>
<dt><strong>Ut: float</strong></dt>
<dd><p class="first last">Prescribed storm motion in zonal direction.
This is only needed if Cv is not zero.</p>
</dd>
<dt><strong>Vt: float</strong></dt>
<dd><p class="first last">Prescribed storm motion in meridional direction.
This is only needed if Cv is not zero.</p>
</dd>
<dt><strong>filt_iterations: int</strong></dt>
<dd><p class="first last">If this is greater than 0, PyDDA will run a low pass filter on
the retrieved wind field and then do the optimization step for
filt_iterations iterations. Set to 0 to disable the low pass filter.</p>
</dd>
<dt><strong>max_outside_opt: bool</strong></dt>
<dd><p class="first last">If set to true, wind values outside the multiple doppler lobes will
be masked, i.e. if less than 2 radars provide coverage for a given
point.</p>
</dd>
<dt><strong>max_iterations: int</strong></dt>
<dd><p class="first last">The maximum number of iterations to run the optimization loop for.</p>
</dd>
<dt><strong>max_w_outside_opt: bool</strong></dt>
<dd><p class="first last">If set to true, vertical winds outside the multiple doppler lobes will
be masked, i.e. if less than 2 radars provide coverage for a given
point.</p>
</dd>
<dt><strong>filter_window: int</strong></dt>
<dd><p class="first last">Window size to use for the low pass filter. A larger window will
increase the number of points factored into the polynomial fit for
the filter, and hence will increase the smoothness.</p>
</dd>
<dt><strong>filter_order: int</strong></dt>
<dd><p class="first last">The order of the polynomial to use for the low pass filter. Higher
order polynomials allow for the retention of smaller scale features
but may also not remove enough noise.</p>
</dd>
<dt><strong>min_bca: float</strong></dt>
<dd><p class="first last">Minimum beam crossing angle in degrees between two radars. 30.0 is the
typical value used in many publications.</p>
</dd>
<dt><strong>max_bca: float</strong></dt>
<dd><p class="first last">Minimum beam crossing angle in degrees between two radars. 150.0 is the
typical value used in many publications.</p>
</dd>
<dt><strong>upper_bc: bool</strong></dt>
<dd><p class="first last">Set this to true to enforce w = 0 at the top of the atmosphere. This is
commonly called the impermeability condition.</p>
</dd>
<dt><strong>model_fields: list of strings</strong></dt>
<dd><p class="first last">The list of fields in the first grid in Grids that contain the custom
data interpolated to the Grid’s grid specification. Helper functions
to create such gridded fields for HRRR and NetCDF WRF data exist
in ::pydda.constraints::. PyDDA will look for fields named U_(model
field name), V_(model field name), and W_(model field name). For
example, if you have U_hrrr, V_hrrr, and W_hrrr, then specify [“hrrr”]
into model_fields.</p>
</dd>
<dt><strong>output_cost_functions: bool</strong></dt>
<dd><p class="first last">Set to True to output the value of each cost function every
10 iterations.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>new_grid_list: list</strong></dt>
<dd><p class="first last">A list of Py-ART grids containing the derived wind fields. These fields
are displayable by the visualization module.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="pydda.cost_functions.calculate_fall_speed.html"
                        title="previous chapter">pydda.cost_functions.calculate_fall_speed</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="pydda.retrieval.get_dd_wind_field_nested.html"
                        title="next chapter">pydda.retrieval.get_dd_wind_field_nested</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/dev_reference/generated/pydda.retrieval.get_dd_wind_field.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pydda.retrieval.get_dd_wind_field_nested.html" title="pydda.retrieval.get_dd_wind_field_nested"
             >next</a> |</li>
        <li class="right" >
          <a href="pydda.cost_functions.calculate_fall_speed.html" title="pydda.cost_functions.calculate_fall_speed"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">PyDDA 0.3.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Developer Reference Manual</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, PyDDA Developers.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.1.
    </div>
  </body>
</html>